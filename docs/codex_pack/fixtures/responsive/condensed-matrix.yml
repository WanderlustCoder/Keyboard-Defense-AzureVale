breakpoints:
  desktop:
    description: "Default viewport (>= 720px height)"
  compact-height:
    description: "Short viewport (<= 540px height)"

panels:
  - id: hud-passives
    title: "HUD Castle Passives"
    toggleSelector: "[data-hud-card=\"passives\"] .hud-card-toggle"
    preferenceKey: "hudPassivesCollapsed"
    defaultState: expanded
    requirements:
      - snapshot: options-overlay
        breakpoint: desktop
        expectedState: expanded
        assertions:
          - type: path
            path: uiSnapshot.hud.passivesCollapsed
            equals: false
          - type: path
            path: uiSnapshot.preferences.hudPassivesCollapsed
            equals: false
          - type: badge
            includes: "hud-passives:expanded"
      - snapshot: hud-main
        breakpoint: compact-height
        expectedState: collapsed
        assertions:
          - type: path
            path: uiSnapshot.hud.passivesCollapsed
            equals: true
          - type: path
            path: uiSnapshot.preferences.hudPassivesCollapsed
            equals: true
          - type: badge
            includes: "hud-passives:collapsed"

  - id: hud-gold-events
    title: "HUD Gold Events"
    toggleSelector: "[data-hud-card=\"gold-events\"] .hud-card-toggle"
    preferenceKey: "hudGoldEventsCollapsed"
    defaultState: expanded
    requirements:
      - snapshot: options-overlay
        breakpoint: desktop
        expectedState: expanded
        assertions:
          - type: path
            path: uiSnapshot.hud.goldEventsCollapsed
            equals: false
          - type: path
            path: uiSnapshot.preferences.hudGoldEventsCollapsed
            equals: false
          - type: badge
            includes: "hud-gold-events:expanded"
      - snapshot: hud-main
        breakpoint: compact-height
        expectedState: collapsed
        assertions:
          - type: path
            path: uiSnapshot.hud.goldEventsCollapsed
            equals: true
          - type: path
            path: uiSnapshot.preferences.hudGoldEventsCollapsed
            equals: true
          - type: badge
            includes: "hud-gold-events:collapsed"

  - id: options-passives
    title: "Options Overlay Passives"
    toggleSelector: "#options-passives-toggle"
    preferenceKey: "optionsPassivesCollapsed"
    defaultState: collapsed
    requirements:
      - snapshot: options-overlay
        breakpoint: desktop
        expectedState: collapsed
        assertions:
          - type: path
            path: uiSnapshot.options.passivesCollapsed
            equals: true
          - type: path
            path: uiSnapshot.preferences.optionsPassivesCollapsed
            equals: true
          - type: badge
            includes: "options-passives:collapsed"
      - snapshot: wave-scorecard
        breakpoint: compact-height
        expectedState: collapsed
        assertions:
          - type: path
            path: uiSnapshot.options.passivesCollapsed
            equals: true
          - type: badge
            includes: "options-passives:collapsed"

  - id: diagnostics-sections-gold
    title: "Diagnostics Gold Events Section"
    toggleSelector: "#diagnostics-section-controls [data-section=\"gold-events\"]"
    preferenceKey: "diagnosticsSections.gold-events"
    defaultState: collapsed-when-condensed
    requirements:
      - snapshot: hud-main
        breakpoint: compact-height
        expectedState: collapsed
        assertions:
          - type: path
            path: uiSnapshot.diagnostics.condensed
            equals: true
          - type: path
            path: uiSnapshot.diagnostics.collapsedSections.gold-events
            equals: true
          - type: path
            path: uiSnapshot.preferences.diagnosticsSections.gold-events
            equals: true
          - type: badge
            includes: "diagnostics:gold-events:collapsed"

  - id: diagnostics-sections-turret
    title: "Diagnostics Turret DPS Section"
    toggleSelector: "#diagnostics-section-controls [data-section=\"turret-dps\"]"
    preferenceKey: "diagnosticsSections.turret-dps"
    defaultState: collapsed
    requirements:
      - snapshot: options-overlay
        breakpoint: desktop
        expectedState: collapsed
        assertions:
          - type: path
            path: uiSnapshot.diagnostics.collapsedSections.turret-dps
            equals: true
          - type: path
            path: uiSnapshot.preferences.diagnosticsSections.turret-dps
            equals: true
          - type: badge
            includes: "diagnostics:turret-dps:collapsed"

  - id: wave-scorecard-condensed
    title: "Wave Scorecard Condensed Signals"
    toggleSelector: "[data-overlay=\"wave-scorecard\"] .condensed-toggle"
    preferenceKey: "hud.prefersCondensedLists"
    defaultState: condensed-on-compact
    requirements:
      - snapshot: wave-scorecard
        breakpoint: compact-height
        expectedState: condensed
        assertions:
          - type: path
            path: uiSnapshot.hud.prefersCondensedLists
            equals: true
          - type: path
            path: uiSnapshot.diagnostics.condensed
            equals: true
          - type: badge
            includes: "hud:prefers-condensed"

  - id: tutorial-banner-expanded
    title: "Tutorial Banner Expanded (Desktop)"
    toggleSelector: "[data-tutorial-banner]"
    preferenceKey: "tutorialBanner"
    defaultState: expanded
    requirements:
      - snapshot: tutorial-summary
        breakpoint: desktop
        expectedState: expanded
        assertions:
          - type: path
            path: uiSnapshot.tutorialBanner.condensed
            equals: false
          - type: path
            path: uiSnapshot.tutorialBanner.expanded
            equals: true
          - type: badge
            includes: "tutorial:expanded"
