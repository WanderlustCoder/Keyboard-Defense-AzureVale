import { type GameConfig } from "../core/config.js";
import { type GameMode, type GameState, type DefeatAnimationPreference, type TurretTargetPriority, type TurretTypeId, type WaveSpawnPreview } from "../core/types.js";
import type { ResolutionTransitionState } from "./ResolutionTransitionController.js";
export interface HudCallbacks {
    onCastleUpgrade(): void;
    onCastleRepair(): void;
    onPlaceTurret(slotId: string, typeId: TurretTypeId): void;
    onUpgradeTurret(slotId: string): void;
    onDowngradeTurret?: (slotId: string) => void;
    onTurretPriorityChange(slotId: string, priority: TurretTargetPriority): void;
    onTurretPresetSave?: (presetId: string) => void;
    onTurretPresetApply?: (presetId: string) => void;
    onTurretPresetClear?: (presetId: string) => void;
    onAnalyticsExport?: () => void;
    onTelemetryToggle?: (enabled: boolean) => void;
    onCrystalPulseToggle?: (enabled: boolean) => void;
    onPauseRequested(): void;
    onResumeRequested(): void;
    onSoundToggle(enabled: boolean): void;
    onSoundVolumeChange(volume: number): void;
    onSoundIntensityChange(intensity: number): void;
    onDiagnosticsToggle(visible: boolean): void;
    onWaveScorecardContinue(): void;
    onReducedMotionToggle(enabled: boolean): void;
    onCheckeredBackgroundToggle(enabled: boolean): void;
    onReadableFontToggle(enabled: boolean): void;
    onDyslexiaFontToggle(enabled: boolean): void;
    onColorblindPaletteToggle(enabled: boolean): void;
    onDefeatAnimationModeChange(mode: DefeatAnimationPreference): void;
    onHudFontScaleChange(scale: number): void;
    onTurretHover?: (slotId: string | null, context?: {
        typeId?: TurretTypeId | null;
        level?: number | null;
    }) => void;
    onCollapsePreferenceChange?: (prefs: HudCollapsePreferenceUpdate) => void;
}
interface HudTurretPresetSlotData {
    slotId: string;
    typeId: TurretTypeId;
    level: number;
    priority?: TurretTargetPriority;
}
interface HudTurretPresetData {
    id: string;
    label: string;
    hasPreset: boolean;
    active: boolean;
    applyCost: number | null;
    applyDisabled: boolean;
    applyMessage: string;
    savedAtLabel: string;
    statusLabel: string | null;
    slots: HudTurretPresetSlotData[];
}
type TutorialSlotLock = {
    slotId: string;
    mode: "placement" | "upgrade";
    forcedType?: TurretTypeId;
};
export interface TutorialSummaryData {
    accuracy: number;
    bestCombo: number;
    breaches: number;
    gold: number;
}
type TutorialSummaryHandlers = {
    onContinue: () => void;
    onReplay: () => void;
};
type ShortcutOverlayElements = {
    container: string;
    closeButton: string;
    launchButton: string;
};
type OptionsOverlayElements = {
    container: string;
    closeButton: string;
    resumeButton: string;
    soundToggle: string;
    soundVolumeSlider: string;
    soundVolumeValue: string;
    soundIntensitySlider: string;
    soundIntensityValue: string;
    diagnosticsToggle: string;
    reducedMotionToggle: string;
    checkeredBackgroundToggle: string;
    readableFontToggle: string;
    dyslexiaFontToggle: string;
    colorblindPaletteToggle: string;
    fontScaleSelect: string;
    defeatAnimationSelect: string;
    telemetryToggle?: string;
    telemetryToggleWrapper?: string;
    crystalPulseToggle?: string;
    crystalPulseToggleWrapper?: string;
    analyticsExportButton?: string;
};
type AnalyticsViewerElements = {
    container: string;
    tableBody: string;
    filterSelect?: string;
};
type WaveScorecardElements = {
    container: string;
    stats: string;
    continue: string;
};
export interface WaveScorecardData {
    waveIndex: number;
    waveTotal: number;
    mode: GameMode;
    accuracy: number;
    enemiesDefeated: number;
    breaches: number;
    perfectWords: number;
    averageReaction: number;
    dps: number;
    turretDps: number;
    typingDps: number;
    turretDamage: number;
    typingDamage: number;
    shieldBreaks: number;
    goldEarned: number;
    bestCombo: number;
    sessionBestCombo: number;
    repairsUsed: number;
    repairHealth: number;
    repairGold: number;
    castleBonusGold: number;
    bonusGold: number;
}
export type HudCollapsePreferenceUpdate = {
    hudCastlePassivesCollapsed?: boolean | null;
    hudGoldEventsCollapsed?: boolean | null;
    optionsPassivesCollapsed?: boolean | null;
};
export interface HudCondensedStateSnapshot {
    tutorialBannerCondensed: boolean;
    tutorialBannerExpanded: boolean;
    hudCastlePassivesCollapsed: boolean | null;
    hudGoldEventsCollapsed: boolean | null;
    optionsPassivesCollapsed: boolean | null;
    compactHeight: boolean;
    prefersCondensedLists: boolean;
}
export declare class HudView {
    private readonly config;
    private readonly callbacks;
    private readonly healthBar;
    private readonly goldLabel;
    private readonly goldDelta;
    private readonly activeWord;
    private readonly typingInput;
    private readonly upgradePanel;
    private readonly comboLabel;
    private readonly comboAccuracyDelta;
    private readonly logList;
    private readonly tutorialBanner?;
    private tutorialBannerExpanded;
    private readonly castleButton;
    private readonly castleRepairButton;
    private readonly castleStatus;
    private readonly castleBenefits;
    private readonly castleGoldEvents;
    private readonly castlePassives;
    private readonly castlePassivesSection;
    private readonly castleGoldEventsSection;
    private readonly wavePreview;
    private readonly slotControls;
    private readonly presetControls;
    private presetContainer;
    private presetList;
    private readonly analyticsViewer?;
    private analyticsViewerVisible;
    private analyticsViewerSignature;
    private analyticsViewerFilter;
    private analyticsViewerFilterSelect?;
    private lastShieldTelemetry;
    private lastGold;
    private maxCombo;
    private goldTimeout;
    private readonly logEntries;
    private readonly logLimit;
    private tutorialSlotLock;
    private passiveHighlightId;
    private lastState;
    private availableTurretTypes;
    private turretDowngradeEnabled;
    private readonly tutorialSummary?;
    private tutorialSummaryHandlers;
    private readonly shortcutLaunchButton?;
    private readonly shortcutOverlay?;
    private optionsCastleBonus?;
    private optionsCastleBenefits?;
    private optionsCastlePassives?;
    private optionsPassivesSection?;
    private optionsPassivesSummary?;
    private optionsPassivesToggle?;
    private optionsPassivesBody?;
    private optionsPassivesCollapsed;
    private optionsPassivesDefaultCollapsed;
    private wavePreviewHint?;
    private wavePreviewHintMessage;
    private wavePreviewHintPinned;
    private wavePreviewHintTimeout;
    private readonly optionsOverlay?;
    private readonly waveScorecard?;
    private syncingOptionToggles;
    private comboBaselineAccuracy;
    private lastAccuracy;
    private hudRoot;
    constructor(config: GameConfig, rootIds: {
        healthBar: string;
        goldLabel: string;
        goldDelta: string;
        activeWord: string;
        typingInput: string;
        upgradePanel: string;
        comboLabel: string;
        comboAccuracyDelta: string;
        eventLog: string;
        wavePreview: string;
        wavePreviewHint?: string;
        tutorialBanner: string;
        tutorialSummary: {
            container: string;
            stats: string;
            continue: string;
            replay: string;
        };
        pauseButton?: string;
        shortcutOverlay?: ShortcutOverlayElements;
        optionsOverlay?: OptionsOverlayElements;
        waveScorecard?: WaveScorecardElements;
        analyticsViewer?: AnalyticsViewerElements;
    }, callbacks: HudCallbacks);
    focusTypingInput(): void;
    showShortcutOverlay(): void;
    hideShortcutOverlay(): void;
    toggleShortcutOverlay(): void;
    isShortcutOverlayVisible(): boolean;
    showOptionsOverlay(): void;
    hideOptionsOverlay(): void;
    isOptionsOverlayVisible(): boolean;
    syncOptionsOverlayState(state: {
        soundEnabled: boolean;
        soundVolume: number;
        soundIntensity: number;
        diagnosticsVisible: boolean;
        reducedMotionEnabled: boolean;
        checkeredBackgroundEnabled: boolean;
        readableFontEnabled: boolean;
        dyslexiaFontEnabled: boolean;
        colorblindPaletteEnabled: boolean;
        hudFontScale: number;
        defeatAnimationMode: DefeatAnimationPreference;
        telemetry?: {
            available: boolean;
            checked: boolean;
            disabled?: boolean;
        };
        turretFeatures?: {
            crystalPulse?: {
                enabled: boolean;
                disabled?: boolean;
            };
        };
    }): void;
    setTurretAvailability(availability: Record<string, boolean>): void;
    setTurretDowngradeEnabled(enabled: boolean): void;
    showWaveScorecard(data: WaveScorecardData): void;
    hideWaveScorecard(): void;
    isWaveScorecardVisible(): boolean;
    update(state: GameState, upcoming: WaveSpawnPreview[], options?: {
        colorBlindFriendly?: boolean;
    }): void;
    showCastleMessage(message: string): void;
    showSlotMessage(slotId: string, message: string): void;
    appendLog(message: string): void;
    setTutorialMessage(message: string | null, highlight?: boolean): void;
    private updateCastleBonusHint;
    private clearWavePreviewHintTimeout;
    private updateWavePreviewHint;
    setWavePreviewHighlight(active: boolean, message?: string | null): void;
    announceEnemyTaunt(message: string, options?: {
        durationMs?: number;
    }): boolean;
    setSlotTutorialLock(lock: TutorialSlotLock): void;
    clearSlotTutorialLock(): void;
    showTutorialSummary(data: TutorialSummaryData, handlers: TutorialSummaryHandlers): void;
    hideTutorialSummary(): void;
    private getCastleUpgradeBenefits;
    private renderCastlePassives;
    private renderCastleGoldEvents;
    private renderOptionsCastlePassives;
    private formatCastlePassive;
    private createPassiveListItem;
    setPassiveHighlight(passiveId: string | null, options?: {
        autoExpand?: boolean;
        scrollIntoView?: boolean;
    }): void;
    private applyPassiveHighlight;
    private updateOptionsPassivesSummary;
    private applyOptionsPassivesToggleLabel;
    private setOptionsPassivesCollapsed;
    private createCondensedSection;
    private setCondensedSectionCollapsed;
    private updateCondensedSectionSummary;
    private setCondensedSectionVisibility;
    applyCollapsePreferences(prefs: HudCollapsePreferenceUpdate, options?: {
        silent?: boolean;
        fallbackToPreferred?: boolean;
    }): void;
    getCondensedState(): HudCondensedStateSnapshot;
    private prefersCondensedHudLists;
    private initializeViewportListeners;
    private refreshTutorialBannerLayout;
    private updateCompactHeightDataset;
    private shouldCondenseTutorialBanner;
    private matchesMediaQuery;
    private renderOptionsCastleBenefits;
    private updateCastleControls;
    private updateCastleRepair;
    private updateTurretControls;
    updateTurretPresets(presets: HudTurretPresetData[]): void;
    private ensurePresetControl;
    private applyTutorialSlotLock;
    private applyForcedSelectOption;
    private resetTutorialSelectOptions;
    private notifyTurretHover;
    private buildTurretHoverContext;
    private elementContains;
    private getSelectOptionNodes;
    private createTurretControls;
    private populatePrioritySelect;
    private normalizePriority;
    private applyTurretAvailabilityToControls;
    private applyAvailabilityToSelect;
    private pickFirstEnabledTurretType;
    private hasEnabledTurretTypes;
    private isTurretTypeEnabled;
    private getTurretDisplayName;
    private describePriority;
    private describeAffinity;
    private describeShieldBonus;
    private formatPresetSummary;
    private formatSlotLabel;
    private formatEnemyTierName;
    private getElement;
    private handleGoldDelta;
    private updateCombo;
    private showComboAccuracyDelta;
    private hideComboAccuracyDelta;
    private renderLog;
    private renderWaveScorecard;
    private updateShieldTelemetry;
    getShieldForecast(): {
        current: boolean;
        next: boolean;
    };
    private setWaveScorecardField;
    private setWaveScorecardVisible;
    private setShortcutOverlayVisible;
    private applyTelemetryOptionState;
    private updateSoundVolumeDisplay;
    private updateSoundIntensityDisplay;
    setAnalyticsExportEnabled(enabled: boolean): void;
    setHudFontScale(scale: number): void;
    setReducedMotionEnabled(enabled: boolean): void;
    setCanvasTransitionState(state: ResolutionTransitionState): void;
    hasAnalyticsViewer(): boolean;
    toggleAnalyticsViewer(): boolean;
    private normalizeAnalyticsViewerFilter;
    private describeAnalyticsViewerFilter;
    private applyAnalyticsViewerFilter;
    private setSelectValue;
    private getSelectValue;
    setAnalyticsViewerVisible(visible: boolean): boolean;
    isAnalyticsViewerVisible(): boolean;
    private refreshAnalyticsViewer;
    private setOptionsOverlayVisible;
}
export {};
//# sourceMappingURL=hud.d.ts.map