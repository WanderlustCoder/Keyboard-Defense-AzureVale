[gd_scene load_steps=4 format=3]

[ext_resource type="Script" path="res://game/main.gd" id="1"]
[ext_resource type="Script" path="res://game/grid_renderer.gd" id="2"]
[ext_resource type="Script" path="res://ui/command_bar.gd" id="3"]

[node name="Main" type="Node2D"]
script = ExtResource("1")

[node name="GridRenderer" type="Node2D" parent="."]
script = ExtResource("2")

[node name="CanvasLayer" type="CanvasLayer" parent="."]
layer = 1

[node name="UIRoot" type="Control" parent="CanvasLayer"]
anchor_left = 0.0
anchor_top = 0.0
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = 0.0
offset_top = 0.0
offset_right = 0.0
offset_bottom = 0.0

[node name="StatsPanel" type="Panel" parent="CanvasLayer/UIRoot"]
anchor_left = 0.0
anchor_top = 0.0
anchor_right = 0.0
anchor_bottom = 0.0
offset_left = 24.0
offset_top = 24.0
offset_right = 520.0
offset_bottom = 240.0

[node name="StatsLabel" type="Label" parent="CanvasLayer/UIRoot/StatsPanel"]    
anchor_left = 0.0
anchor_top = 0.0
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = 12.0
offset_top = 10.0
offset_right = -12.0
offset_bottom = -120.0
text = "Phase: day"

[node name="LessonHealthLabel" type="Label" parent="CanvasLayer/UIRoot/StatsPanel"]
anchor_left = 0.0
anchor_top = 1.0
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = 12.0
offset_top = -120.0
offset_right = -12.0
offset_bottom = -88.0
text = "Lesson: -- | Health: --"

[node name="GoalBadge" type="RichTextLabel" parent="CanvasLayer/UIRoot/StatsPanel"]
anchor_left = 0.0
anchor_top = 1.0
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = 12.0
offset_top = -80.0
offset_right = -12.0
offset_bottom = -44.0
bbcode_enabled = true
scroll_active = false
scroll_following = false
text = "GOAL: Balanced\nStatus: -- (play a night)"

[node name="GoalLegend" type="RichTextLabel" parent="CanvasLayer/UIRoot/StatsPanel"]
anchor_left = 0.0
anchor_top = 1.0
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = 12.0
offset_top = -44.0
offset_right = -12.0
offset_bottom = -8.0
bbcode_enabled = true
scroll_active = false
scroll_following = false
text = "Goals: Balanced Accuracy Backspace Speed\nF2: cycle goals | goal <id>"

[node name="PromptPanel" type="Panel" parent="CanvasLayer/UIRoot"]
anchor_left = 0.0
anchor_top = 0.0
anchor_right = 0.0
anchor_bottom = 0.0
offset_left = 24.0
offset_top = 252.0
offset_right = 520.0
offset_bottom = 304.0

[node name="PromptLabel" type="Label" parent="CanvasLayer/UIRoot/PromptPanel"]
anchor_left = 0.0
anchor_top = 0.0
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = 12.0
offset_top = 8.0
offset_right = -12.0
offset_bottom = -8.0
text = ""

[node name="TutorialPanel" type="Panel" parent="CanvasLayer/UIRoot"]
anchor_left = 0.0
anchor_top = 0.0
anchor_right = 0.0
anchor_bottom = 0.0
offset_left = 24.0
offset_top = 312.0
offset_right = 520.0
offset_bottom = 440.0
visible = false

[node name="TutorialLabel" type="RichTextLabel" parent="CanvasLayer/UIRoot/TutorialPanel"]
anchor_left = 0.0
anchor_top = 0.0
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = 12.0
offset_top = 8.0
offset_right = -12.0
offset_bottom = -8.0
bbcode_enabled = true
scroll_active = false
scroll_following = false
text = "[b]Tutorial[/b]"

[node name="SettingsPanel" type="Panel" parent="CanvasLayer/UIRoot"]
anchor_left = 0.0
anchor_top = 0.0
anchor_right = 0.0
anchor_bottom = 0.0
offset_left = 24.0
offset_top = 312.0
offset_right = 520.0
offset_bottom = 600.0
visible = false

[node name="SettingsLabel" type="RichTextLabel" parent="CanvasLayer/UIRoot/SettingsPanel"]
anchor_left = 0.0
anchor_top = 0.0
anchor_right = 1.0
anchor_bottom = 0.0
offset_left = 12.0
offset_top = 8.0
offset_right = -12.0
offset_bottom = 88.0
bbcode_enabled = true
scroll_active = false
scroll_following = false
text = "[b]Settings[/b]\nType: bind <action>"

[node name="ControlsHeader" type="Label" parent="CanvasLayer/UIRoot/SettingsPanel"]
anchor_left = 0.0
anchor_top = 0.0
anchor_right = 1.0
anchor_bottom = 0.0
offset_left = 12.0
offset_top = 96.0
offset_right = -12.0
offset_bottom = 116.0
text = "CONTROLS"

[node name="ControlsText" type="RichTextLabel" parent="CanvasLayer/UIRoot/SettingsPanel"]
anchor_left = 0.0
anchor_top = 0.0
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = 12.0
offset_top = 120.0
offset_right = -12.0
offset_bottom = -112.0
scroll_active = false
scroll_following = false
text = "cycle_goal: F2\ntoggle_trend: F3\ntoggle_compact: F4\ntoggle_history: F5"

[node name="LessonsSettingsHeader" type="Label" parent="CanvasLayer/UIRoot/SettingsPanel"]
anchor_left = 0.0
anchor_top = 0.0
anchor_right = 1.0
anchor_bottom = 0.0
offset_left = 12.0
offset_top = 184.0
offset_right = -12.0
offset_bottom = 204.0
text = "LESSONS"

[node name="LessonsSettingsText" type="RichTextLabel" parent="CanvasLayer/UIRoot/SettingsPanel"]
anchor_left = 0.0
anchor_top = 0.0
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = 12.0
offset_top = 208.0
offset_right = -12.0
offset_bottom = -8.0
scroll_active = false
scroll_following = false
text = "Lessons sort: default\nSparklines: ON\nUse: lessons sort default|recent|name\nUse: lessons sparkline on|off"

[node name="LessonPanel" type="Panel" parent="CanvasLayer/UIRoot"]
anchor_left = 0.0
anchor_top = 0.0
anchor_right = 0.0
anchor_bottom = 0.0
offset_left = 560.0
offset_top = 24.0
offset_right = 1040.0
offset_bottom = 360.0
visible = false

[node name="LessonLabel" type="RichTextLabel" parent="CanvasLayer/UIRoot/LessonPanel"]
anchor_left = 0.0
anchor_top = 0.0
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = 12.0
offset_top = 8.0
offset_right = -12.0
offset_bottom = -8.0
bbcode_enabled = true
scroll_active = true
scroll_following = false
text = "[b]Lesson Browser[/b]"

[node name="InspectPanel" type="Panel" parent="CanvasLayer/UIRoot"]
anchor_left = 0.0
anchor_top = 0.0
anchor_right = 0.0
anchor_bottom = 0.0
offset_left = 560.0
offset_top = 24.0
offset_right = 1040.0
offset_bottom = 360.0

[node name="InspectLabel" type="RichTextLabel" parent="CanvasLayer/UIRoot/InspectPanel"]
anchor_left = 0.0
anchor_top = 0.0
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = 12.0
offset_top = 8.0
offset_right = -12.0
offset_bottom = -8.0
scroll_active = true
scroll_following = false

[node name="LegendPanel" type="Panel" parent="CanvasLayer/UIRoot"]
anchor_left = 0.0
anchor_top = 0.0
anchor_right = 0.0
anchor_bottom = 0.0
offset_left = 560.0
offset_top = 372.0
offset_right = 1040.0
offset_bottom = 424.0

[node name="LegendLabel" type="Label" parent="CanvasLayer/UIRoot/LegendPanel"]
anchor_left = 0.0
anchor_top = 0.0
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = 12.0
offset_top = 8.0
offset_right = -12.0
offset_bottom = -8.0
text = "Legend: . plains f forest m mountain ~ water ? unknown | F/L/Q/W/T buildings (T1-3) | @ cursor | B base | r/s/a enemies | PATH OVERLAY: OFF"

[node name="WavePanel" type="Panel" parent="CanvasLayer/UIRoot"]
anchor_left = 0.0
anchor_top = 0.0
anchor_right = 0.0
anchor_bottom = 0.0
offset_left = 560.0
offset_top = 432.0
offset_right = 1040.0
offset_bottom = 620.0

[node name="WaveLabel" type="RichTextLabel" parent="CanvasLayer/UIRoot/WavePanel"]
anchor_left = 0.0
anchor_top = 0.0
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = 12.0
offset_top = 8.0
offset_right = -12.0
offset_bottom = -8.0
scroll_active = true
scroll_following = false

[node name="TypingFeedbackPanel" type="Panel" parent="CanvasLayer/UIRoot"]
anchor_left = 0.0
anchor_top = 0.0
anchor_right = 0.0
anchor_bottom = 0.0
offset_left = 560.0
offset_top = 628.0
offset_right = 1040.0
offset_bottom = 720.0

[node name="TypingFeedbackLabel" type="RichTextLabel" parent="CanvasLayer/UIRoot/TypingFeedbackPanel"]
anchor_left = 0.0
anchor_top = 0.0
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = 12.0
offset_top = 8.0
offset_right = -12.0
offset_bottom = -8.0
scroll_active = false
scroll_following = false

[node name="TypingReportPanel" type="Panel" parent="CanvasLayer/UIRoot"]
anchor_left = 0.0
anchor_top = 1.0
anchor_right = 0.0
anchor_bottom = 1.0
offset_left = 560.0
offset_top = -240.0
offset_right = 1040.0
offset_bottom = -24.0

[node name="TypingReportText" type="RichTextLabel" parent="CanvasLayer/UIRoot/TypingReportPanel"]
anchor_left = 0.0
anchor_top = 0.0
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = 12.0
offset_top = 8.0
offset_right = -12.0
offset_bottom = -8.0
scroll_active = true
scroll_following = false

[node name="HistoryPanel" type="Panel" parent="CanvasLayer/UIRoot"]
anchor_left = 0.0
anchor_top = 1.0
anchor_right = 0.0
anchor_bottom = 1.0
offset_left = 560.0
offset_top = -740.0
offset_right = 1040.0
offset_bottom = -540.0

[node name="HistoryLabel" type="RichTextLabel" parent="CanvasLayer/UIRoot/HistoryPanel"]
anchor_left = 0.0
anchor_top = 0.0
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = 12.0
offset_top = 8.0
offset_right = -12.0
offset_bottom = -8.0
scroll_active = true
scroll_following = false

[node name="TrendPanel" type="Panel" parent="CanvasLayer/UIRoot"]
anchor_left = 0.0
anchor_top = 1.0
anchor_right = 0.0
anchor_bottom = 1.0
offset_left = 560.0
offset_top = -520.0
offset_right = 1040.0
offset_bottom = -300.0

[node name="TrendLabel" type="RichTextLabel" parent="CanvasLayer/UIRoot/TrendPanel"]
anchor_left = 0.0
anchor_top = 0.0
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = 12.0
offset_top = 8.0
offset_right = -12.0
offset_bottom = -8.0
scroll_active = true
scroll_following = false

[node name="LogPanel" type="Panel" parent="CanvasLayer/UIRoot"]
anchor_left = 0.0
anchor_top = 1.0
anchor_right = 0.0
anchor_bottom = 1.0
offset_left = 24.0
offset_top = -300.0
offset_right = 560.0
offset_bottom = -80.0

[node name="LogLabel" type="RichTextLabel" parent="CanvasLayer/UIRoot/LogPanel"]
anchor_left = 0.0
anchor_top = 0.0
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = 12.0
offset_top = 8.0
offset_right = -12.0
offset_bottom = -8.0
scroll_active = true
scroll_following = true

[node name="CommandBar" type="LineEdit" parent="CanvasLayer/UIRoot"]
anchor_left = 0.0
anchor_top = 1.0
anchor_right = 0.0
anchor_bottom = 1.0
offset_left = 24.0
offset_top = -64.0
offset_right = 560.0
offset_bottom = -32.0
script = ExtResource("3")
placeholder_text = "Type a command (help/status/gather/build/explore/end)"
